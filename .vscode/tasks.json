{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "run-local-auth-smoke",
			"type": "shell",
			"command": "F:/tabeby-api/.venv/Scripts/python.exe",
			"args": [
				"- <<",
				"'PY'",
				"\nfrom fastapi.testclient import TestClient\nfrom app.main import app\nimport uuid\n\nclient = TestClient(app)\n\nprint('HEALTH', client.get('/health').status_code)\n\nemail = f'test-{uuid.uuid4().hex[:6]}@tabeby.app'\npassword = 'Passw0rd!'\nprint('REGISTER', email)\nr = client.post('/auth/admin/register', json={'name':'Tester','email':email,'password':password})\nprint('REGISTER status', r.status_code)\nprint('REGISTER json', r.json())\n\nr2 = client.post('/auth/login', json={'email':email,'password':password})\nprint('LOGIN status', r2.status_code)\nprint('LOGIN json', r2.json())\nobj = r2.json()['data']\nacc = obj['accessToken']\nref = obj['refreshToken']\n\nr3 = client.get('/users/me', headers={'Authorization': f'Bearer {acc}'})\nprint('ME status', r3.status_code)\nprint('ME json', r3.json())\n\nr4 = client.get('/users/me/sessions', headers={'Authorization': f'Bearer {acc}'})\nprint('SESSIONS status', r4.status_code)\nprint('SESSIONS json', r4.json())\n\nr5 = client.post('/auth/refresh', json={'refreshToken': ref})\nprint('REFRESH status', r5.status_code)\nprint('REFRESH json', r5.json())\n\nPY"
			]
		}
	]
}