# ุฏููู ุงุณุชุฎุฏุงู ูุธุงู ุงูุฃุฑุดูุฉ ูู Postman

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุงูุฃุฑุดูุฉ ูุนูู **ุชููุงุฆููุง** ูู ููู ูู ุงูุณุงุนุฉ 12 ูููุงู ุจุชูููุช ุงูุนุฑุงูุ ูููู ููููู ุฃูุถูุง:
- ุนุฑุถ ุงูุญุฌูุฒุงุช ุงูุญุงููุฉ (ุณุชูุงุญุธ ุฃู ุงูุฃูุงู ุงููุฏููุฉ ุณุชุฎุชูู ุจุนุฏ ุงูุฃุฑุดูุฉ)
- ุงุณุชุฑุฌุงุน ุงูุจูุงูุงุช ุงููุคุฑุดูุฉ ุนุจุฑ API

---

## ๐ก Endpoints ุงููุชุงุญุฉ

### 1๏ธโฃ ุนุฑุถ ุงูุญุฌูุฒุงุช ุงูุญุงููุฉ (ูุจู ูุจุนุฏ ุงูุฃุฑุดูุฉ)

#### GET `/api/booking_days?clinic_id={clinic_id}`

**ูุซุงู:**
```
GET https://tabeby-api.onrender.com/api/booking_days?clinic_id=4
```

**Response ูุจู ุงูุฃุฑุดูุฉ (ุชุญุชูู ุนูู ุฃูุงู ูุฏููุฉ):**
```json
{
    "clinic_id": 4,
    "days": {
        "2025-11-10": {
            "status": "open",
            "capacity_total": 600,
            "capacity_used": 1,
            "patients": [...]
        },
        "2025-11-11": {
            "status": "open",
            "capacity_total": 600,
            "capacity_used": 4,
            "patients": [...]
        },
        "2025-11-12": {...},
        "2025-11-13": {...},
        "2025-11-14": {...},
        "2025-11-15": {...}
    }
}
```

**Response ุจุนุฏ ุงูุฃุฑุดูุฉ (ุงูุฃูุงู ุงููุฏููุฉ ูุญุฐููุฉ):**
```json
{
    "clinic_id": 4,
    "days": {
        "2025-11-14": {
            "status": "open",
            "capacity_total": 600,
            "capacity_used": 0,
            "patients": []
        },
        "2025-11-15": {
            "status": "open",
            "capacity_total": 600,
            "capacity_used": 0,
            "patients": []
        }
    }
}
```

โ **ุงูููุงุญุธุฉ:** ุงูุฃูุงู ุงููุฏููุฉ (2025-11-10 ุฅูู 2025-11-13) ุชู ููููุง ููุฃุฑุดูู!

---

### 2๏ธโฃ ุงุณุชุฑุฌุงุน ุงูุจูุงูุงุช ุงููุคุฑุดูุฉ

#### GET `/api/booking_archives/{clinic_id}`

**ูุซุงู:**
```
GET https://tabeby-api.onrender.com/api/booking_archives/4
```

**Headers:**
```
Doctor-Secret: your-secret-here
```

**Response:**
```json
{
    "clinic_id": 4,
    "items": [
        {
            "id": 1,
            "table_date": "2025-11-13",
            "capacity_total": 600,
            "capacity_served": 1,
            "capacity_cancelled": 0,
            "patients_json": "[{\"booking_id\":\"B-4-20251113-0001\",\"token\":1,\"patient_id\":\"P-90\",\"name\":\"ูุงุณูู ูุฑุชุถู\",\"phone\":\"+46666777881\",\"source\":\"patient_app\",\"status\":\"ุชู ุงูุญุฌุฒ\",\"created_at\":\"2025-11-12T21:07:51.020621+00:00\"}]",
            "created_at": "2025-11-14T21:00:05.123456",
            "updated_at": "2025-11-14T21:00:05.123456"
        },
        {
            "id": 2,
            "table_date": "2025-11-12",
            "capacity_total": 600,
            "capacity_served": 1,
            "capacity_cancelled": 0,
            "patients_json": "[{\"booking_id\":\"B-4-20251112-0002\",\"token\":2,\"patient_id\":\"P-72\",\"name\":\"ุนูู ุญุณููู\",\"phone\":\"077222 17302\",\"source\":\"patient_app\",\"status\":\"ุชู ุงูุญุฌุฒ\",\"created_at\":\"2025-11-12T18:25:59.187236+00:00\"}]",
            "created_at": "2025-11-14T21:00:05.234567",
            "updated_at": "2025-11-14T21:00:05.234567"
        },
        {
            "id": 3,
            "table_date": "2025-11-11",
            "capacity_total": 600,
            "capacity_served": 4,
            "capacity_cancelled": 0,
            "patients_json": "[...]",
            "created_at": "2025-11-14T21:00:05.345678",
            "updated_at": "2025-11-14T21:00:05.345678"
        },
        {
            "id": 4,
            "table_date": "2025-11-10",
            "capacity_total": 600,
            "capacity_served": 1,
            "capacity_cancelled": 0,
            "patients_json": "[...]",
            "created_at": "2025-11-14T21:00:05.456789",
            "updated_at": "2025-11-14T21:00:05.456789"
        }
    ]
}
```

#### ูุน ููุชุฑุฉ ุจุงูุชุงุฑูุฎ:

```
GET https://tabeby-api.onrender.com/api/booking_archives/4?from_date=2025-11-10&to_date=2025-11-12
```

---

### 3๏ธโฃ ุงุณุชุฑุฌุงุน ุฃุฑุดูู ุงูุญุฌูุฒุงุช ุงูุฐูุจูุฉ

#### GET `/api/golden_booking_archives/{clinic_id}`

**ูุซุงู:**
```
GET https://tabeby-api.onrender.com/api/booking_archives/4
```

**Headers:**
```
Doctor-Secret: your-secret-here
```

**ููุณ ุตูุบุฉ Response ุงูุณุงุจูุฉ**

---

## ๐ง ุฅุนุฏุงุฏ Postman

### ุงูุฎุทูุฉ 1: ุฅูุดุงุก Collection ุฌุฏูุฏุฉ

1. ุงูุชุญ Postman
2. ุงุถุบุท **New** โ **Collection**
3. ุงุณู ุงูู Collection: `Tabeby API - Archives`

### ุงูุฎุทูุฉ 2: ุฅุถุงูุฉ Environment Variables

1. ุงุถุบุท ุนูู **Environments** (ูุณุงุฑ ุงูุดุงุดุฉ)
2. ุงุถุบุท **+** ูุฅูุดุงุก ุจูุฆุฉ ุฌุฏูุฏุฉ
3. ุงุณู ุงูุจูุฆุฉ: `Tabeby Production`
4. ุฃุถู ุงููุชุบูุฑุงุช ุงูุชุงููุฉ:

| Variable | Initial Value | Current Value |
|----------|--------------|---------------|
| `base_url` | `https://tabeby-api.onrender.com` | `https://tabeby-api.onrender.com` |
| `doctor_secret` | `your-secret-here` | `your-secret-here` |
| `clinic_id` | `4` | `4` |

5. ุงุถุบุท **Save**

### ุงูุฎุทูุฉ 3: ุฅูุดุงุก Requests

#### Request 1: ุนุฑุถ ุงูุญุฌูุฒุงุช ุงูุญุงููุฉ

- **Method:** `GET`
- **URL:** `{{base_url}}/api/booking_days?clinic_id={{clinic_id}}`
- **Headers:** ูุง ููุฌุฏ
- ุงุถุบุท **Send**

#### Request 2: ุนุฑุถ ุงูุฃุฑุดูู

- **Method:** `GET`
- **URL:** `{{base_url}}/api/booking_archives/{{clinic_id}}`
- **Headers:**
  - Key: `Doctor-Secret`
  - Value: `{{doctor_secret}}`
- ุงุถุบุท **Send**

#### Request 3: ุนุฑุถ ุงูุฃุฑุดูู ูุน ููุชุฑุฉ

- **Method:** `GET`
- **URL:** `{{base_url}}/api/booking_archives/{{clinic_id}}?from_date=2025-11-10&to_date=2025-11-12`
- **Headers:**
  - Key: `Doctor-Secret`
  - Value: `{{doctor_secret}}`
- ุงุถุบุท **Send**

---

## ๐ ููุงุฑูุฉ ูุจู ูุจุนุฏ ุงูุฃุฑุดูุฉ

### ูุจู ุงูุณุงุนุฉ 12 ูููุงู (ูุจู ุงูุฃุฑุดูุฉ)

```
GET /api/booking_days?clinic_id=4
```

**ุงููุชูุฌุฉ:**
- โ ูุญุชูู ุนูู ุฌููุน ุงูุฃูุงู (ุงููุฏููุฉ + ุงูุญุงููุฉ + ุงููุณุชูุจู)
- ูุซุงู: 2025-11-10, 11, 12, 13, 14, 15

```
GET /api/booking_archives/4
```

**ุงููุชูุฌุฉ:**
- โ ูุฏ ูููู ูุงุฑุบูุง ุฃู ูุญุชูู ุนูู ุฃุฑุดููุงุช ุณุงุจูุฉ ููุท

---

### ุจุนุฏ ุงูุณุงุนุฉ 12 ูููุงู (ุจุนุฏ ุงูุฃุฑุดูุฉ)

```
GET /api/booking_days?clinic_id=4
```

**ุงููุชูุฌุฉ:**
- โ ูุญุชูู ุนูู ุงูููู ุงูุญุงูู ูุงููุณุชูุจู ููุท
- ูุซุงู: 2025-11-14, 15 (ููุท)
- โ ุงูุฃูุงู ุงููุฏููุฉ ูุญุฐููุฉ: 10, 11, 12, 13

```
GET /api/booking_archives/4
```

**ุงููุชูุฌุฉ:**
- โ ูุญุชูู ุนูู ุงูุฃูุงู ุงููุคุฑุดูุฉ ุงูุฌุฏูุฏุฉ
- ูุซุงู: 2025-11-10, 11, 12, 13

---

## ๐ ูุชู ุชุญุฏุซ ุงูุฃุฑุดูุฉุ

| ุงูููุช | ุงูุญุฏุซ |
|-------|-------|
| **00:00 ุต (ุงูุนุฑุงู)** = 21:00 UTC | ุฃุฑุดูุฉ ุงูุญุฌูุฒุงุช ุงูุนุงุฏูุฉ |
| **00:05 ุต (ุงูุนุฑุงู)** = 21:05 UTC | ุฃุฑุดูุฉ ุงูุญุฌูุฒุงุช ุงูุฐูุจูุฉ |

---

## ๐ฏ ุณููุงุฑูู ูุงูู ููุงุฎุชุจุงุฑ

### ุงูููู: 2025-11-14

#### ุงูุณุงุนุฉ 11:00 ูุณุงุกู (ูุจู ุงูุฃุฑุดูุฉ ุจุณุงุนุฉ)

```bash
# 1. ุนุฑุถ ุงูุญุฌูุฒุงุช ุงูุญุงููุฉ
GET /api/booking_days?clinic_id=4

# ุงููุชูุฌุฉ: ุฌููุน ุงูุฃูุงู ููุฌูุฏุฉ
{
  "days": {
    "2025-11-10": {...},  โ
    "2025-11-11": {...},  โ
    "2025-11-12": {...},  โ
    "2025-11-13": {...},  โ
    "2025-11-14": {...},  โ (ุงูููู)
    "2025-11-15": {...}   โ
  }
}

# 2. ุนุฑุถ ุงูุฃุฑุดูู
GET /api/booking_archives/4

# ุงููุชูุฌุฉ: ูุฏ ูููู ูุงุฑุบูุง
{
  "items": []
}
```

#### ุงูุณุงุนุฉ 12:05 ุต (ุจุนุฏ ุงูุฃุฑุดูุฉ ุจู 5 ุฏูุงุฆู)

```bash
# 1. ุนุฑุถ ุงูุญุฌูุฒุงุช ุงูุญุงููุฉ
GET /api/booking_days?clinic_id=4

# ุงููุชูุฌุฉ: ุงูุฃูุงู ุงููุฏููุฉ ูุญุฐููุฉ!
{
  "days": {
    "2025-11-14": {...},  โ (ุงูููู)
    "2025-11-15": {...}   โ
  }
}
# ุงูุฃูุงู 10, 11, 12, 13 ูุญุฐููุฉ! โ

# 2. ุนุฑุถ ุงูุฃุฑุดูู
GET /api/booking_archives/4

# ุงููุชูุฌุฉ: ุงูุฃูุงู ุงููุญุฐููุฉ ููุฌูุฏุฉ ููุง!
{
  "items": [
    {"table_date": "2025-11-13", ...},  โ ูุคุฑุดู
    {"table_date": "2025-11-12", ...},  โ ูุคุฑุดู
    {"table_date": "2025-11-11", ...},  โ ูุคุฑุดู
    {"table_date": "2025-11-10", ...}   โ ูุคุฑุดู
  ]
}
```

---

## ๐ก ูุตุงุฆุญ ูููุฉ

1. **ุงูุฃุฑุดูุฉ ุชููุงุฆูุฉ 100%** - ูุง ุชุญุชุงุฌ ูุนูู ุดูุก
2. **ุงูุจูุงูุงุช ูุญููุธุฉ** - ูุง ุดูุก ููุญุฐู ููุงุฆููุงุ ููุท ููููู ููุฃุฑุดูู
3. **ุงุณุชุฑุฌุงุน ุณูู** - ุงุณุชุฎุฏู `/api/booking_archives/{clinic_id}`
4. **ููุชุฑุฉ ุจุงูุชุงุฑูุฎ** - ุฃุถู `?from_date=XXX&to_date=YYY`
5. **ุงูุฃูุงู** - ุชุญุชุงุฌ `Doctor-Secret` ูู ุงูู Header

---

## โ ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ

**ุณ: ูู ูููู ุฅูุบุงุก ุงูุฃุฑุดูุฉุ**
ุฌ: ูุงุ ููู ุงูุจูุงูุงุช ูุญููุธุฉ ุจุงููุงูู ูู ุฌุฏูู ุงูุฃุฑุดูู.

**ุณ: ูุงุฐุง ูู ุงุญุชุฌุช ุจูุงูุงุช ููู ูุฏููุ**
ุฌ: ุงุณุชุฎุฏู `/api/booking_archives/{clinic_id}` ูููุตูู ุฅูููุง.

**ุณ: ูู ุงูุฃุฑุดูุฉ ุชุคุซุฑ ุนูู ุงูุณุฑุนุฉุ**
ุฌ: ูุงุ ุจุงูุนูุณ! ุณุชุตุจุญ ุงูู API ุฃุณุฑุน ูุฃู ุงูุฌุฏุงูู ุงูุฑุฆูุณูุฉ ุฃุฎู.

**ุณ: ูุชู ูุญุฏุซ ุงูุฃุฑุดูุฉ ุจุงูุถุจุทุ**
ุฌ: ูู ููู ูู **12:00 ูููุงู ุจุชูููุช ุงูุนุฑุงู**.

---

## ๐ ูุซุงู Collection ูู Postman (JSON)

ุงุญูุธ ูุฐุง ูู ููู `Tabeby-Archives.postman_collection.json`:

```json
{
  "info": {
    "name": "Tabeby API - Archives",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "ุนุฑุถ ุงูุญุฌูุฒุงุช ุงูุญุงููุฉ",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/api/booking_days?clinic_id={{clinic_id}}",
          "host": ["{{base_url}}"],
          "path": ["api", "booking_days"],
          "query": [{"key": "clinic_id", "value": "{{clinic_id}}"}]
        }
      }
    },
    {
      "name": "ุนุฑุถ ุงูุฃุฑุดูู",
      "request": {
        "method": "GET",
        "header": [
          {"key": "Doctor-Secret", "value": "{{doctor_secret}}"}
        ],
        "url": {
          "raw": "{{base_url}}/api/booking_archives/{{clinic_id}}",
          "host": ["{{base_url}}"],
          "path": ["api", "booking_archives", "{{clinic_id}}"]
        }
      }
    },
    {
      "name": "ุนุฑุถ ุงูุฃุฑุดูู ูุน ููุชุฑุฉ",
      "request": {
        "method": "GET",
        "header": [
          {"key": "Doctor-Secret", "value": "{{doctor_secret}}"}
        ],
        "url": {
          "raw": "{{base_url}}/api/booking_archives/{{clinic_id}}?from_date=2025-11-10&to_date=2025-11-12",
          "host": ["{{base_url}}"],
          "path": ["api", "booking_archives", "{{clinic_id}}"],
          "query": [
            {"key": "from_date", "value": "2025-11-10"},
            {"key": "to_date", "value": "2025-11-12"}
          ]
        }
      }
    }
  ]
}
```

ุงุณุชูุฑุฏ ูุฐุง ุงูููู ูู Postman: **Import** โ ุงุฎุชุฑ ุงูููู โ **Import**

---

## โ ุงูุฎูุงุตุฉ

- โ ุงููุธุงู ูุนูู ุชููุงุฆููุง ูู ููู ูู 12 ูููุงู
- โ ุงูุฃูุงู ุงููุฏููุฉ ุชูููู ููุฃุฑุดูู ูุชูุญุฐู ูู ุงูุฌุฏุงูู ุงูุฑุฆูุณูุฉ
- โ ููููู ุงุณุชุฑุฌุงุน ุงูุจูุงูุงุช ุงููุคุฑุดูุฉ ูู ุฃู ููุช
- โ ุงูุจูุงูุงุช ูุญููุธุฉ ุจุงููุงูู ููุง ุชูุญุฐู ููุงุฆููุง
- โ ุงูู API ุฃุตุจุญุช ุฃุณุฑุน ูุฃุฎู

๐ **ุฌุงูุฒ ููุงุณุชุฎุฏุงู!**
